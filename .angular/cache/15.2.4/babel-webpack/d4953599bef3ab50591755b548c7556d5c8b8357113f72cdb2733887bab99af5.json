{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { catchError, map, retry, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class BookAPIService {\n  constructor(_http) {\n    this._http = _http;\n  }\n  getBooks() {\n    const headers = new HttpHeaders().set(\"Content-Type\", \"text/plain;charset=utf- 8\");\n    const requestOptions = {\n      headers: headers,\n      responseType: \"text\"\n    };\n    return this._http.get(\"/books\", requestOptions).pipe(map(res => JSON.parse(res)), retry(3), catchError(this.handleError));\n  }\n  handleError(error) {\n    return throwError(() => new Error(error.message));\n  }\n}\nBookAPIService.ɵfac = function BookAPIService_Factory(t) {\n  return new (t || BookAPIService)(i0.ɵɵinject(i1.HttpClient));\n};\nBookAPIService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BookAPIService,\n  factory: BookAPIService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAwCA,WAAW,QACnD,sBAAsB;AACtB,SAASC,UAAU,EAAEC,GAAG,EAAcC,KAAK,EAAEC,UAAU,QAAQ,MAAM;;;AAQrE,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,KAAiB;IAAjB,UAAK,GAALA,KAAK;EAAgB;EAEzCC,QAAQ;IACN,MAAMC,OAAO,GAAC,IAAIT,WAAW,EAAE,CAACU,GAAG,CAAC,cAAc,EAAC,2BAA2B,CAAC;IAC/E,MAAMC,cAAc,GAAQ;MAAEF,OAAO,EAACA,OAAO;MAAEG,YAAY,EAAC;IAAM,CAAE;IACpE,OAAO,IAAI,CAACL,KAAK,CAACM,GAAG,CAAM,QAAQ,EAACF,cAAc,CAAC,CAACG,IAAI,CACtDZ,GAAG,CAACa,GAAG,IAAEC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAiB,CAAC,EACzCZ,KAAK,CAAC,CAAC,CAAC,EACRF,UAAU,CAAC,IAAI,CAACiB,WAAW,CAAC,CAAC;EACjC;EAEAA,WAAW,CAACC,KAAuB;IACjC,OAAOf,UAAU,CAAC,MAAI,IAAIgB,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC,CAAC;EAC/C;;AAfShB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAiB,SAAdjB,cAAc;EAAAkB,YAFb;AAAM","names":["HttpHeaders","catchError","map","retry","throwError","BookAPIService","constructor","_http","getBooks","headers","set","requestOptions","responseType","get","pipe","res","JSON","parse","handleError","error","Error","message","factory","providedIn"],"sourceRoot":"","sources":["D:\\HK6\\WEB_ADVANCED\\fromzero\\module5\\module5-app\\src\\app\\services\\book-api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from\n'@angular/common/http';\nimport { catchError, map, Observable, retry, throwError } from 'rxjs';\n\nimport { Ibook } from '../interfaces/books';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BookAPIService {\n\n  constructor(private _http: HttpClient) { }\n\n  getBooks():Observable<any> {\n    const headers=new HttpHeaders().set(\"Content-Type\",\"text/plain;charset=utf- 8\")\n    const requestOptions:Object={ headers:headers, responseType:\"text\" }\n    return this._http.get<any>(\"/books\",requestOptions).pipe(\n      map(res=>JSON.parse(res) as Array<Ibook>),\n      retry(3),\n      catchError(this.handleError))\n  }\n\n  handleError(error:HttpErrorResponse){\n    return throwError(()=>new Error(error.message))\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}